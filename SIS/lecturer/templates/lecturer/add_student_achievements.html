{% extends 'lecturer/base_lecturer.html' %}
{% load widget_tweaks %}

{% block title %}Student Achievements{% endblock %}

{% block content_inner %}
<div class="max-w-2xl mx-auto mt-12 bg-white/10 rounded-2xl p-8 border border-white/20 shadow-xl">
  <h1 class="text-2xl font-bold text-blue-300 mb-6 text-center">Student Achievements</h1>

  <!-- Student Info -->
  <div class="flex items-center gap-4 mb-6">
    {% if student.profile_picture %}
      <img src="{{ student.profile_picture.url }}" class="w-12 h-12 rounded-full border-2 border-white/20 object-cover" />
    {% else %}
      <div class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center border-2 border-white/20 text-white text-xl font-bold">
        {{ student.user.get_full_name|first|default:"?" }}
      </div>
    {% endif %}
    <div>
      <div class="font-semibold text-lg text-white">{{ student.user.get_full_name }}</div>
      <div class="text-gray-400 text-sm">{{ student.user.email }}</div>
    </div>
  </div>

  <!-- Add Achievement Form -->
  <form method="post" class="space-y-6 mb-10">
    {% csrf_token %}
    {% for field in form.visible_fields %}
      <div>
        <label for="{{ field.id_for_label }}" class="block text-white font-semibold mb-2">
          {{ field.label }}{% if field.field.required %}<span class="text-red-400">*</span>{% endif %}
        </label>
        {{ field|add_class:"w-full px-4 py-3 rounded-lg bg-white/5 border border-white/20 text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500" }}
        {% if field.help_text %}
          <p class="text-xs text-gray-400 mt-1">{{ field.help_text }}</p>
        {% endif %}
        {% for error in field.errors %}
          <p class="text-xs text-red-400 mt-1">{{ error }}</p>
        {% endfor %}
      </div>
    {% endfor %}
    <button type="submit" class="w-full py-3 mt-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-lg transition text-lg">
      Add Achievement
    </button>
  </form>

  <!-- Achievements List -->
  <div class="bg-white/10 rounded-xl p-6 border border-white/20">
    <h3 class="text-lg font-semibold text-white mb-4">Existing Achievements</h3>
    {% if achievements %}
      <ul class="space-y-2">
        {% for achievement in achievements %}
          <li>
            <span class="font-semibold">{{ achievement.title }}</span>
            <span class="ml-2 text-gray-300">({{ achievement.date_awarded|date:"Y-m-d" }})</span>
            {% if achievement.description %}
              <div class="ml-2 text-gray-400">{{ achievement.description }}</div>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <span class="italic text-gray-400">No achievements recorded.</span>
    {% endif %}
  </div>
</div>
{% endblock %}
